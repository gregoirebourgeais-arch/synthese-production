<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Synthèse Production Lactalis</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <h1><img src="logo.png" alt="Lactalis" class="logo"> Synthèse Production</h1>
    <div id="dateHeure"></div>
    <div id="equipeActuelle"></div>
  </header>

  <nav class="navbar">
    <button onclick="showSection('atelier')" class="nav-btn active">📊 Atelier</button>
    <button onclick="showSection('arrets')" class="nav-btn">⏸️ Arrêts</button>
    <button onclick="showSection('personnel')" class="nav-btn">👥 Personnel</button>
    <button onclick="showSection('organisation')" class="nav-btn">🗒️ Organisation</button>
    <button onclick="exportGlobal()" class="nav-btn">📤 Export</button>
  </nav>

  <main>
    <!-- Atelier -->
    <section id="atelier" class="section active">
      <h2>Tableau de Production</h2>
      <div class="line-buttons">
        <button onclick="selectLine('Râpé')">Râpé</button>
        <button onclick="selectLine('T2')">T2</button>
        <button onclick="selectLine('RT')">RT</button>
        <button onclick="selectLine('OMORI')">OMORI</button>
        <button onclick="selectLine('T1')">T1</button>
        <button onclick="selectLine('Sticks')">Sticks</button>
        <button onclick="selectLine('Emballage')">Emballage</button>
        <button onclick="selectLine('Dés')">Dés</button>
        <button onclick="selectLine('Filets')">Filets</button>
        <button onclick="selectLine('Prédécoupé')">Prédécoupé</button>
      </div>

      <div id="productionForm">
        <h3 id="selectedLine">Ligne : </h3>

        <label>Heure début :</label>
        <input type="time" id="heureDebut" />

        <label>Heure fin :</label>
        <input type="time" id="heureFin" />

        <label>Quantité réalisée :</label>
        <input type="number" id="quantiteProduite" placeholder="colis réalisés" />

        <label>Quantité restante :</label>
        <input type="number" id="quantiteRestante" placeholder="à produire" oninput="updateEstimation()" />

        <label>Cadence manuelle (colis/h) :</label>
        <input type="number" id="cadenceManuelle" placeholder="optionnel" step="0.01" />

        <label>Estimation de fin :</label>
        <input type="text" id="estimationFin" readonly />

        <div class="button-row">
          <button onclick="enregistrerProduction()">💾 Enregistrer</button>
          <button onclick="annulerDernier()">❌ Annuler</button>
          <button onclick="resetForm()">🧹 Remise à zéro</button>
        </div>

        <h4>Historique Production</h4>
        <ul id="historiqueProduction"></ul>
      </div>
    </section>

    <!-- Arrêts -->
    <section id="arrets" class="section">
      <h2>Suivi des Arrêts</h2>
      <label>Choisir une ligne :</label>
      <select id="ligneArret">
        <option value="">-- Sélectionner --</option>
        <option>Râpé</option><option>T2</option><option>RT</option>
        <option>OMORI</option><option>T1</option><option>Sticks</option>
        <option>Emballage</option><option>Dés</option><option>Filets</option><option>Prédécoupé</option>
      </select>

      <label>Motif d’arrêt :</label>
      <input type="text" id="motifArret" placeholder="ex: panne, nettoyage, pause..." />

      <label>Durée (minutes) :</label>
      <input type="number" id="dureeArret" />

      <div class="button-row">
        <button onclick="enregistrerArret()">💾 Enregistrer</button>
        <button onclick="exportGlobal()">📤 Export</button>
      </div>

      <h4>Historique des Arrêts</h4>
      <ul id="historiqueArrets"></ul>
    </section>

    <!-- Personnel -->
    <section id="personnel" class="section">
      <h2>Gestion du Personnel</h2>
      <label>Nom :</label>
      <input type="text" id="nomPersonnel" placeholder="Nom Prénom" />

      <label>Poste :</label>
      <input type="text" id="postePersonnel" placeholder="ex: conducteur, agent, etc." />

      <div class="button-row">
        <button onclick="enregistrerPersonnel()">💾 Enregistrer</button>
      </div>

      <h4>Équipe en poste</h4>
      <ul id="listePersonnel"></ul>
    </section>

    <!-- Organisation -->
    <section id="organisation" class="section">
      <h2>Organisation / Consignes</h2>
      <textarea id="consigne" placeholder="Écrire une consigne..."></textarea>
      <div class="button-row">
        <button onclick="enregistrerConsigne()">💾 Enregistrer</button>
      </div>
      <h4>Historique des Consignes</h4>
      <ul id="historiqueConsignes"></ul>
    </section>
  </main>

  <div id="calculator" class="calculator">
    <input type="text" id="calc-display" readonly>
    <div class="calc-buttons">
      <button onclick="press('7')">7</button><button onclick="press('8')">8</button><button onclick="press('9')">9</button><button onclick="press('/')">÷</button>
      <button onclick="press('4')">4</button><button onclick="press('5')">5</button><button onclick="press('6')">6</button><button onclick="press('*')">×</button>
      <button onclick="press('1')">1</button><button onclick="press('2')">2</button><button onclick="press('3')">3</button><button onclick="press('-')">−</button>
      <button onclick="press('0')">0</button><button onclick="press('.')">.</button><button onclick="calculate()">=</button><button onclick="press('+')">+</button>
      <button class="clear" onclick="clearCalc()">C</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
